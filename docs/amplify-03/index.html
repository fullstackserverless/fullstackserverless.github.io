<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.54">


<title data-react-helmet="true">Amplify API - AppSync - CRUD (Create Read Update Delete) | #fullStackServerless</title>

<meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Amplify API - AppSync - CRUD (Create Read Update Delete) | #fullStackServerless"><meta data-react-helmet="true" name="description" content="AWS AppSync simplifies application development by creating a universal API for securely accessing, modifying, and combining data from multiple sources. AppSync is a managed service that uses GraphQL so that applications can easily get only the data they need."><meta data-react-helmet="true" property="og:description" content="AWS AppSync simplifies application development by creating a universal API for securely accessing, modifying, and combining data from multiple sources. AppSync is a managed service that uses GraphQL so that applications can easily get only the data they need."><meta data-react-helmet="true" property="og:url" content="https://fullstackserverless.github.io/docs/amplify-03">

<link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico">


<link rel="stylesheet" href="/styles.d50ab616.css">


<link rel="preload" href="/styles.bfc2fba6.js" as="script">

<link rel="preload" href="/runtime~main.f3e12862.js" as="script">

<link rel="preload" href="/main.368fd3c9.js" as="script">

<link rel="preload" href="/1.4d6ffc5f.js" as="script">

<link rel="preload" href="/2.fa8e84c6.js" as="script">

<link rel="preload" href="/3.84920baf.js" as="script">

<link rel="preload" href="/1be78505.3dee9bd6.js" as="script">

<link rel="preload" href="/20ac7829.d5855488.js" as="script">

<link rel="preload" href="/17896441.ce4b0cc7.js" as="script">

<link rel="preload" href="/8e9c1e54.e0f7981d.js" as="script">

</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=window.matchMedia("(prefers-color-scheme: dark)"),n=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();null!==n?t(n):e.matches&&t("dark")}()</script>
<div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/logo.png" alt="React Native Village Logo"><strong class="navbar__title">#fullStackServerless</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/startup00">Tutorials</a><a target="_blank" rel="noopener noreferrer" href="https://www.patreon.com/fullstackserverless" class="navbar__item navbar__link">Patreon</a><a target="_blank" rel="noopener noreferrer" href="https://www.linkedin.com/in/raoffonom" class="navbar__item navbar__link">Author</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">Vacancies</a></div><div class="navbar__items navbar__items--right"><a target="_blank" rel="noopener noreferrer" href="https://github.com/fullstackserverless" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_1gtM"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_keGJ moon_1gwN"></span></div><div class="react-toggle-track-x"><span class="toggle_keGJ sun_3CPA"></span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/logo.png" alt="React Native Village Logo"><strong class="navbar__title">#fullStackServerless</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" position="left" href="/docs/startup00">Tutorials</a></li><li class="menu__list-item"><a target="_blank" rel="noopener noreferrer" href="https://www.patreon.com/fullstackserverless" class="menu__link" position="left">Patreon</a></li><li class="menu__list-item"><a target="_blank" rel="noopener noreferrer" href="https://www.linkedin.com/in/raoffonom" class="menu__link" position="left">Author</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" position="left" href="/blog">Vacancies</a></li><li class="menu__list-item"><a target="_blank" rel="noopener noreferrer" href="https://github.com/fullstackserverless" class="menu__link" position="right">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_1kjD"><div class="docSidebarContainer_1cYp"><div class="sidebar_1kLs"><div class="menu menu--responsive menu_w2sC"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_2vk4" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Startup</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/startup00">Introduction</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">React Native</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/start03">ESLint &amp; Prettierrc</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">UI Kit</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/unicorn00">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/unicorn01">Components</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/unicorn02">Installation</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Authentication</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/auth1-00">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/auth1-01">Default setup</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/auth1-02">Custom setup</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">AWS Amplify</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/amplify-00">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/amplify-01">Serverless</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/amplify-02">GraphQL</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" tabindex="0" href="/docs/amplify-03">Amplify API  - AppSync</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/amplify-04">DataStore - CRUD</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/notif-00">Push Notification</a></li></ul></li></ul></div></div></div><main class="docMainContainer_FFX1"><div class="container padding-vert--lg docItemWrapper_1cc7"><div class="row"><div class="col docItemCol_2GOA"><div class="docItemContainer_2cwg"><article><header><h1 class="docTitle_1vWb">Amplify API - AppSync - CRUD (Create Read Update Delete)</h1></header><div class="markdown"><p>AWS AppSync simplifies application development by creating a universal API for securely accessing, modifying, and combining data from multiple sources. AppSync is a managed service that uses GraphQL so that applications can easily get only the data they need.</p><p>Using AppSync, you can create scalable applications, including those requiring real-time updates, using a variety of data sources, such as NoSQL data warehouses, relational databases, HTTP APIs, and native data sources with AWS Lambda. For mobile and web applications, AppSync also provides access to local data when devices go offline, and synchronizes data when you reconnect to the Internet. In this case, the client can adjust the conflict resolution procedure.</p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="benefits"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#benefits" title="Direct link to heading">#</a>Benefits:</h1><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="easy-start-and-development-keeping-up-with-the-business"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#easy-start-and-development-keeping-up-with-the-business" title="Direct link to heading">#</a>Easy start and development keeping up with the business</h2><p>Get started in minutes with the selected IDE (e.g. Xcode, Android Studio, VS Code), and use the intuitive AWS AppSync or AWS Amplify CLI management console to automatically create your API and client code. AWS AppSync integrates with Amazon DynamoDB, Amazon Aurora, Amazon Elasticsearch, AWS Lambda, and other AWS services, allowing you to create sophisticated applications with virtually unlimited performance and memory that change depending on your business needs.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="real-time-subscriptions-and-offline-access"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#real-time-subscriptions-and-offline-access" title="Direct link to heading">#</a>Real-time Subscriptions and Offline Access</h2><p>AWS AppSync provides real-time subscription to millions of devices, as well as offline access to application data. After reconnecting the device, AWS AppSync only synchronizes updates at the time the device was disconnected, not the entire database. AWS AppSync offers customizable, server-side conflict resolution and resolution.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="unified-and-secure-access-to-distributed-data"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#unified-and-secure-access-to-distributed-data" title="Direct link to heading">#</a>Unified and secure access to distributed data</h2><p>Perform complex queries and generalizations across multiple data sources with a single network call using GraphQL. AWS AppSync allows you to easily protect the data of your application using several authentication modes at the same time, and also allows you to determine the degree of threat and perform detailed access control at the data definition level directly from your GraphQL scheme.</p><p>In this lesson, we will create the GraphQL API, which interacts with the DynamoDB NoSQL database to perform CRUD operations (create, read, update, delete).</p><p><img src="/img/steps/01.png" alt="Step01"></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="connect-the-api-plugin"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#connect-the-api-plugin" title="Direct link to heading">#</a>Connect the API plugin</h2><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-bash codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">amplify </span><span class="token function" style="color:rgb(130, 170, 255)">add</span><span class="token plain"> api</span></div></div></div></div></div><p><img src="/img/dataStore/dataStore00.png" alt="AWSAmplify"></p><p><img src="/img/steps/02.png" alt="Step02"></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="schemagraphql"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#schemagraphql" title="Direct link to heading">#</a>schema.graphql</h2><p>After the selected items, the GraphQL schema will open in <code>amplify/backend/api/&lt;datasourcename&gt;/schema.graphql</code> where we insert this model:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-graphql codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">type</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">Job</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token directive function" style="color:rgb(130, 170, 255)">@model</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token directive function" style="color:rgb(130, 170, 255)">@auth</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token attr-name" style="color:rgb(255, 203, 107)">rules</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token attr-name" style="color:rgb(255, 203, 107)">allow</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> owner</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token attr-name" style="color:rgb(255, 203, 107)">ownerField</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;owner&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token attr-name" style="color:rgb(255, 203, 107)">operations</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">create</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> update</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> delete</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token attr-name" style="color:rgb(255, 203, 107)">id</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> ID</span><span class="token operator" style="color:rgb(137, 221, 255)">!</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token attr-name" style="color:rgb(255, 203, 107)">position</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> String</span><span class="token operator" style="color:rgb(137, 221, 255)">!</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token attr-name" style="color:rgb(255, 203, 107)">rate</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> String</span><span class="token operator" style="color:rgb(137, 221, 255)">!</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token attr-name" style="color:rgb(255, 203, 107)">description</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> String</span><span class="token operator" style="color:rgb(137, 221, 255)">!</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token attr-name" style="color:rgb(255, 203, 107)">owner</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> String</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div></div></div><p>This is a GraphQL schema. GraphQL Transform provides an easy-to-use abstraction that helps you quickly create server parts for web and mobile applications in AWS. Using GraphQL Transform, you define the data model of your application using the GraphQL Schema Definition Language (SDL), and the library handles the conversion of the SDL definition to a set of fully descriptive AWS CloudFormation templates that implement your data model.</p><p>When used with tools such as the Amplify CLI, GraphQL Transform simplifies the process of developing, deploying, and supporting GraphQL APIs. With it, you define your API using the GraphQL Schema Definition Language (SDL) and then use automation to transform it into a fully descriptive cloud information template that implements the specification.
GraphQL is an API specification. It is an API query language and runtime for executing these queries with your data. It has some similarities to REST and is the best replacement for REST.</p><p>GraphQL was introduced by Facebook in 2015, although it has been used internally since 2012. GraphQL allows clients to determine the structure of the required data, and it is this structure that is returned from the server. Querying data in this way provides a much more efficient way for client-side applications to interact with APIs, reducing the number of incomplete samples and preventing excessive data samples.</p><p>More about GraphQL <a href="https://fullstackserverless.github.io/docs/amplify-02">here</a></p><p>Let us return to our scheme, where the main components of the GraphQL scheme are object types, which is a type of object that you can extract from your service:</p><ul><li><p><code>Job</code> is a type of a GraphQL object (GraphQL Object Type), that is, a type with some fields. Most types in your schema will be object types.</p></li><li><p><code>id position rate description owner</code> - fields in type Job. This means that these are the only fields that can appear in any part of a GraphQL query that works with the Job type.</p></li><li><p><code>String</code> is one of the built-in scalar types - these are types that are resolved into a single scalar object and cannot have subselects in the query. We will look at scalar types later.</p></li><li><p><code>String!</code> - the field is not NULL, means that the GraphQL service promises to always give you a value when requesting this field. In general, this is a required field.</p></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="types"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#types" title="Direct link to heading">#</a>Types</h2><p>GraphQL comes with a set of default scalar types out of the box:</p><ul><li><p><code>Int</code> 32-bit signed integer.</p></li><li><p><code>Float</code> floating point value with double precision.</p></li><li><p><code>String</code> character sequence UTF - 8.</p></li><li><p><code>Boolean</code> true or false.</p></li><li><p><code>ID</code> scalar type ID is a unique identifier, often used to retrieve an object or as a key for the cache. The type of identifier is serialized in the same way as a string; however, the definition of it as an identifier means that it is not intended for human perception.</p></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="directives"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#directives" title="Direct link to heading">#</a>Directives</h2><ul><li><p><code>@model</code> - Object types marked with<code>@model</code> are top-level objects in the generated API. Objects marked with <code>@model</code> are stored in Amazon DynamoDB and can be protected with<code>@auth</code>, linked to other objects via <code>@connection</code></p></li><li><p><code>@auth</code> - Authorization is required for the application to interact with your GraphQL API. API keys are best used for public APIs.
The <code>@auth</code> object types annotated by<code> @auth</code> are protected by a set of authorization rules that provide you with additional controls than top-level authorization in the API. You can use the <code>@auth</code> directive to define object types and fields in your project schema.
When using the <code>@auth</code> directive for definitions of object types, which are also annotated with<code>@model</code>, all recognition tools that return objects of this type will be protected.</p></li></ul><p>Other directives and details are in <a href="https://aws-amplify.github.io/docs/cli-toolchain/graphql?sdk=js#directives">official documentation</a>.</p><p>Rules of the <code>@auth</code> directive</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-jsx codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">@</span><span class="token function" style="color:rgb(130, 170, 255)">auth</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"> rules</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">allow</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> owner</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> ownerField</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;owner&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> operations</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">create</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> update</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">delete</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></div></div></div></div><p>mean that the operations CREATE, UPDATE, DELETE are allowed exclusively to the owner, and the READ operation is for everyone.</p><p>It&#x27;s time to test it in practice! Therefore, we write the command in the console:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-bash codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">amplify mock api</span></div></div></div></div></div><p><img src="/img/dataStore/dataStore01.png" alt="amplifyMockApi"></p><p>With this team, you can quickly test your achievements of the change without the need to allocate or update the cloud resources that you use at each stage. In this way, you can set up unit and integration tests that can run quickly without affecting your cloud backend.</p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="three-whales-on-which-graphql-stands"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#three-whales-on-which-graphql-stands" title="Direct link to heading">#</a>Three whales on which GraphQL stands:</h1><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="query-read"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#query-read" title="Direct link to heading">#</a>Query (READ)</h2><p>Simply put, queries in GraphQL are how you intend to query data. You will receive exactly the data that you need. No more no less.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="mutation-create-update-delete"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#mutation-create-update-delete" title="Direct link to heading">#</a>Mutation (CREATE UPDATE DELETE)</h2><p>Mutations in GraphQL are a way to change data on a server and get updated data back.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="subscriptions"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#subscriptions" title="Direct link to heading">#</a>Subscriptions</h2><p>A way to maintain a connection to the server in real time. This means that whenever an event occurs on the server and when this event is called, the server will send the appropriate data to the client.</p><p>You can see all available methods of our created API by clicking on Docs (Documentation Explorer) in the upper right corner. The values ​​are clickable, so you can see all the possible queries.</p><p><img src="https://miro.medium.com/max/4800/1*wcYg4qmPXOdghWgS5P1RtQ.png" alt="Docs"></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="create"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#create" title="Direct link to heading">#</a>CREATE</h2><p>We open our API at the address that it issued (each has its own) the result of the <code>amplify mock api</code> command and execute the CREATE request by pressing the play button.</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-graphql codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">mutation</span><span class="token plain"> Create </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  __typename</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  createJob</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token attr-name" style="color:rgb(255, 203, 107)">input</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token attr-name" style="color:rgb(255, 203, 107)">position</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;React Native Developer&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token attr-name" style="color:rgb(255, 203, 107)">rate</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">3000</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token attr-name" style="color:rgb(255, 203, 107)">description</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;We are looking for a React Native developer (St. Petersburg) to develop from scratch a mobile version of the main cs.money platform  Our product is an international trading platform for the exchange of virtual items. (CS: GO, Dota 2) which is shared by more than 5 million users. The project has existed for more than 3 years. and takes a leading position in its field. The platform is used in more than 100 countries of the world.  Now we want to make a mobile application and decided to do it on React Native. You have to develop an application from scratch and this is a great opportunity to build a good architecture without resting on legacy.  Requirements:  Knowledge of react patterns Knowledge of SOLID principles Knowledge of the basics of mobile specifics (caching, working with the native API, rendering optimization) Knowledge of RN&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    description</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    id</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    owner</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    position</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    rate</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div></div></div><p><img src="https://miro.medium.com/max/4800/1*GwJb9ZZVB6px_QI8xKwslQ.png" alt="create"></p><p>To consolidate the material, create some more vacancies.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="read"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#read" title="Direct link to heading">#</a>READ</h2><p>We get a list of all the vacancies. Insert request:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-graphql codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">query</span><span class="token plain"> Read </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  __typename</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  listJobs </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    items </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      description</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      id</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      owner</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      position</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      rate</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div></div></div><p><img src="https://miro.medium.com/max/4800/1*ykTq1YUoBLn6G45fQ3eLXQ.png" alt="read"></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="update"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#update" title="Direct link to heading">#</a>UPDATE</h2><p>To update, we need to take the vacancy ID (be sure to enter your own, and not from the example) and pass it to this request with the data changed. For example, update the <code>position</code> and<code> rate</code> fields</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-graphql codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">mutation</span><span class="token plain"> Update </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  __typename</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  updateJob</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token attr-name" style="color:rgb(255, 203, 107)">input</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token attr-name" style="color:rgb(255, 203, 107)">id</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;1a8a763f-28b8-450a-96f0-73e0d1d8ac04&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token attr-name" style="color:rgb(255, 203, 107)">position</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Full Stack Serverless&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token attr-name" style="color:rgb(255, 203, 107)">rate</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">5000</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    id</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    description</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    owner</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    position</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    rate</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div></div></div><p><img src="https://miro.medium.com/max/4800/1*IxfySd5he-V-lxJSyTsqNA.png" alt="update"></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="delete"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#delete" title="Direct link to heading">#</a>DELETE</h2><p>To delete, as well as in the case of updating, we need to transfer the vacancy ID (be sure to enter your own, and not from the example).</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-graphql codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">mutation</span><span class="token plain"> Delete </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  __typename</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  deleteJob</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token attr-name" style="color:rgb(255, 203, 107)">input</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token attr-name" style="color:rgb(255, 203, 107)">id</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;1a8a763f-28b8-450a-96f0-73e0d1d8ac04&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    id</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div></div></div><p><img src="https://miro.medium.com/max/4800/1*vqFyPU7VVMmulZeF_zd0mg.png" alt="delete"></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="permissions"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#permissions" title="Direct link to heading">#</a>Permissions</h2><p>Now let&#x27;s check if our rules work, which we indicated in the scheme. Only the owner can update, delete and create.</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-jsx codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain"> @</span><span class="token function" style="color:rgb(130, 170, 255)">auth</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"> rules</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">allow</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> owner</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> ownerField</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> “owner”</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> operations</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">create</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> update</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">delete</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></div></div></div></div><p>To change the user, click on UpdateAuth in the main menu. Where we randomly update Username and Email.</p><p><img src="https://miro.medium.com/max/430/1*a89USnLuvHC0OXf3wdgYSA.png" alt="UpdateAuth"></p><p><img src="https://miro.medium.com/max/1400/1*BP6B8Wwe9Ldgugf2lUyyPA.png" alt="authOptions"></p><p>If we send a READ request, then it works, but if we send an UPDATE or DELETE request and we get an error.
The rules work, as required!</p><p><img src="https://miro.medium.com/max/4800/1*NevLJXxyURK4JOx8qWyy4w.png"></p><p>Now that we have tested the functionality of the API, we can publish it to the cloud with the command:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-bash codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">amplify push</span></div></div></div></div></div><p><img src="/img/dataStore/dataStore02.png"></p><p>After a few minutes, the model is uploaded to the AWS server, so we continue to the react native application.</p><p><a href="https://www.patreon.com/bePatron?u=34467235"><img src="/img/logo/patreon.png" alt="Become a Patron!"></a></p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/facebook/docusaurus/edit/master/website/docs/amplify03.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/amplify-02"><div class="pagination-nav__link--sublabel">Previous</div><div class="pagination-nav__link--label">« What is GraphQL?</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/amplify-04"><div class="pagination-nav__link--sublabel">Next</div><div class="pagination-nav__link--label">DataStore - CRUD (Create Read Update Delete) »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_TbNY"><ul class="contents contents__left-border"><li><a href="#easy-start-and-development-keeping-up-with-the-business" class="contents__link">Easy start and development keeping up with the business</a></li><li><a href="#real-time-subscriptions-and-offline-access" class="contents__link">Real-time Subscriptions and Offline Access</a></li><li><a href="#unified-and-secure-access-to-distributed-data" class="contents__link">Unified and secure access to distributed data</a></li><li><a href="#connect-the-api-plugin" class="contents__link">Connect the API plugin</a></li><li><a href="#schemagraphql" class="contents__link">schema.graphql</a></li><li><a href="#types" class="contents__link">Types</a></li><li><a href="#directives" class="contents__link">Directives</a></li><li><a href="#query-read" class="contents__link">Query (READ)</a></li><li><a href="#mutation-create-update-delete" class="contents__link">Mutation (CREATE UPDATE DELETE)</a></li><li><a href="#subscriptions" class="contents__link">Subscriptions</a></li><li><a href="#create" class="contents__link">CREATE</a></li><li><a href="#read" class="contents__link">READ</a></li><li><a href="#update" class="contents__link">UPDATE</a></li><li><a href="#delete" class="contents__link">DELETE</a></li><li><a href="#permissions" class="contents__link">Permissions</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Tutorials</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/startup00">Startup</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/unicorn00">UI Kit</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/auth1-00">Authentication</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/amplify-00">AWS Amplify</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="https://discord.gg/Ntuttww">Discord</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Social</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="https://dev.to/playra">Dev.to</a></li><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="https://twitter.com/koshasuperstar">Twitter</a></li><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="https://www.patreon.com/fullstackserverless">Patreon</a></li><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="https://github.com/fullstackserverless">GitHub</a></li></ul></div></div><div class="text--center"><div class="margin-bottom--sm"><a href="https://opensource.facebook.com/" target="_blank" rel="noopener noreferrer" class="footerLogoLink_1Wg7"><img class="footer__logo" alt="Facebook Open Source Logo" src="/img/oss_logo.png"></a></div><div>Copyright © 2020 @playra. Built with Docusaurus.</div></div></div></footer>
</div>

<script src="/styles.bfc2fba6.js"></script>

<script src="/runtime~main.f3e12862.js"></script>

<script src="/main.368fd3c9.js"></script>

<script src="/1.4d6ffc5f.js"></script>

<script src="/2.fa8e84c6.js"></script>

<script src="/3.84920baf.js"></script>

<script src="/1be78505.3dee9bd6.js"></script>

<script src="/20ac7829.d5855488.js"></script>

<script src="/17896441.ce4b0cc7.js"></script>

<script src="/8e9c1e54.e0f7981d.js"></script>


</body>
</html>